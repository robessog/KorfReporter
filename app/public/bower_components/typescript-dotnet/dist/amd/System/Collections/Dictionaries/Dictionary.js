/*!
 * @author electricessence / https://github.com/electricessence/
 * Original: http://linqjs.codeplex.com/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};define(["require","exports","../../Compare","../../Types","../../Functions","./DictionaryBase","../Enumeration/EnumeratorBase","../LinkedNodeList"],function(e,t,r,n,o,u,i,a){"use strict";function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function c(e){return null===e?"null":e===l?"undefined":typeof e.toString===n["default"].FUNCTION?e.toString():Object.prototype.toString.call(e)}var l=void 0,f=function(){function e(e,t,r,n){this.key=e,this.value=t,this.previous=r,this.next=n}return e}(),p=function(e){function t(t){void 0===t&&(t=o["default"].Identity),e.call(this),this._compareSelector=t,this._count=0,this._entries=new a["default"],this._buckets={}}return __extends(t,e),t.prototype.setKV=function(e,t,n){var o,u=this,i=u._buckets,a=u._entries,p=u._compareSelector,y=p(e),d=c(y);if(s(i,d)){for(var h=r.areEqual,v=i[d],_=0;_<v.length;_++){var k=v[_];if(p(k.key)===y){if(!n)throw new Error("Key already exists.");var w=!h(k.value,t);return w&&(t===l?(a.removeNode(k),v.splice(_,1),v.length||delete i[d],--u._count):(o=new f(e,t),a.replace(k,o),v[_]=o),u._onValueUpdate(e,t,k.value)),w}}v.push(o=o||new f(e,t))}else{if(t===l){if(n)return!1;throw new Error("Cannot add 'undefined' value.")}i[d]=[o=new f(e,t)]}return++u._count,a.addNode(o),u._onValueUpdate(e,t,void 0),!0},t.prototype.addByKeyValue=function(e,t){this.setKV(e,t,!1)},t.prototype.getValue=function(e){var t=this._buckets,r=this._compareSelector,n=r(e),o=c(n);if(s(t,o))for(var u=t[o],i=0,a=u;i<a.length;i++){var l=a[i];if(r(l.key)===n)return l.value}},t.prototype.setValue=function(e,t){return this.setKV(e,t,!0)},t.prototype.containsKey=function(e){var t=this,r=t._buckets,n=t._compareSelector,o=n(e),u=c(o);if(!s(r,u))return!1;for(var i=r[u],a=0,l=i.length;l>a;a++)if(n(i[a].key)===o)return!0;return!1},t.prototype.clear=function(){var t=this,r=t._buckets,n=e.prototype.clear.call(this);t._count=0;for(var o in r)r.hasOwnProperty(o)&&delete r[o];return t._entries.clear(),n},t.prototype.getCount=function(){return this._count},t.prototype.getEnumerator=function(){var e,t=this;return new i["default"](function(){e=t._entries.first},function(t){if(null!=e){var r={key:e.key,value:e.value};return e=e.next,t.yieldReturn(r)}return t.yieldBreak()})},t.prototype.getKeys=function(){for(var e=this,t=[],r=e._entries.first;r;)t.push(r.key),r=r.next;return t},t.prototype.getValues=function(){for(var e=this,t=[],r=e._entries.first;r;)t.push(r.value),r=r.next;return t},t}(u["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=p});
//# sourceMappingURL=Dictionary.js.map
