{"version":3,"sources":["MatchEvent/matchEvent.ts"],"names":[],"mappings":"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","file":"MatchEvent/matchEvent.js","sourcesContent":["/// <reference path=\"./../../typings/browser//ambient/socket.io-client/index.d.ts\" />\r\n\r\nimport {MatchTeam} from './../Model/MatchTeam';\r\nimport {EventGuess} from './../Model/EventGuess';\r\nimport {EventAbbreviationResolver} from './../Model/EventAbbreviationResolver';\r\nimport {EventType} from './../SHARED_SRC/Domain/EventType';\r\nimport {GamePlayer} from './../SHARED_SRC/Domain/GamePlayer';\r\nimport * as Socket from 'socket.io-client';\r\n\r\nexport class MatchEvent {\r\n  message: string = 'Hello from my királyságos aurelia!';\r\n  \r\n  eventId: string = 'game15';\r\n  static socketNamespace = 'gameEvents';\r\n  userInput: string = '';\r\n  guesses: EventGuess[] = [];\r\n  events: EventGuess[] = [];\r\n  team1: MatchTeam = new MatchTeam('SZAC');\r\n  team2: MatchTeam = new MatchTeam('Szentendre');\r\n  selectedGuessIndex = 0;\r\n  \r\n  socket: SocketIOClient.Socket;\r\n  \r\n  \r\n  constructor() {\r\n    this.team1.players.push(new GamePlayer('György', 'Dörfi', 6));\r\n    this.team1.players.push(new GamePlayer('Tamás', 'Berényi', 36));\r\n    \r\n    this.team2.players.push(new GamePlayer('Viktor', 'Horváth', 1));\r\n    this.team2.players.push(new GamePlayer('Nóra', 'Molnár', 6));\r\n  }\r\n  \r\n  changeMessage(): void {\r\n      this.message = 'changed message pressd';\r\n  }\r\n  \r\n  userInputChanged(): void {\r\n    this.selectedGuessIndex = 0;\r\n    let eventType: EventType;\r\n    let playerNumber: number;\r\n    this.guesses.splice(0, this.guesses.length);\r\n    if (this.userInput.length >= 1) {\r\n      eventType = EventAbbreviationResolver.getEventType(this.userInput[0]);\r\n    }\r\n    \r\n    var numberMatches = this.userInput.match(/\\d+/);\r\n    if (numberMatches && numberMatches.length > 0 ) {\r\n      playerNumber = Number(numberMatches[0]);\r\n    }\r\n    \r\n    if (eventType) {\r\n      var tp1 = this.filterPlayerOfTeam(playerNumber, this.team1);\r\n      var tp2 = this.filterPlayerOfTeam(playerNumber, this.team2);\r\n      if (tp1) {\r\n        this.guesses.push(new EventGuess(tp1, eventType, this.team1.name));\r\n      }\r\n      if (tp2) {\r\n        this.guesses.push(new EventGuess(tp2, eventType, this.team2.name));\r\n      }\r\n    }\r\n  }\r\n  \r\n  keyPressed(event: KeyboardEvent) : void {\r\n    switch (event.keyCode) {\r\n      case 40:\r\n        this.selectedGuessIndex = Math.min(++this.selectedGuessIndex, this.guesses.length - 1);\r\n        break;\r\n    case 38:\r\n        this.selectedGuessIndex = Math.max(--this.selectedGuessIndex, 0);\r\n        break;\r\n    case 13:\r\n        this.createEvent();\r\n        this.resetUserInput();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  \r\n  private getSocketUri(namespace: string) : string {\r\n    return `${window.location.href}${namespace}`;\r\n  }\r\n  \r\n  activate(): void {\r\n    this.socket = Socket.connect(/*this.getSocketUri(MatchEvent.socketNamespace)*/);\r\n    this.socket.on('connect', (socket) => {\r\n      this.socket.emit('join', 'Client connected.');\r\n      this.socket.on('newGameEvent', (event: EventGuess) => {\r\n        this.newEventReceived(event); \r\n      });\r\n    });\r\n  }\r\n  \r\n  private filterPlayerOfTeam(jerseyNumber: number, team: MatchTeam) : GamePlayer {\r\n    return team.players.find((p) => { return p.jerseyNumber === jerseyNumber; });\r\n  }\r\n \r\n  private resetUserInput() : void {\r\n   this.userInput = '';\r\n   this.guesses.splice(0, this.guesses.length); \r\n  }\r\n \r\n private newEventReceived(event: EventGuess) : void {\r\n   var eventGuess = new EventGuess(\r\n     new GamePlayer(event.player.firstName, event.player.lastName, event.player.jerseyNumber), event.eventType, event.team);\r\n   this.events.unshift(eventGuess);\r\n }\r\n \r\n  private createEvent() : void {\r\n    this.events.unshift(this.guesses[this.selectedGuessIndex]);\r\n    this.socket.emit('newGameEvent', this.events[0]);\r\n  } \r\n}\r\n"],"sourceRoot":"/source/"}